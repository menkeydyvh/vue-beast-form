import{v as B,d as y}from"./index-c96d6d1b.js";import{P as U,M as E}from"./app-bb4f7c52.js";import{g as F,S as O,r as V,C as S,_ as $,M as r,p,q as b,N as v,Q as C,O as q,P as A,U as w,V as h}from"./framework-23cc0af1.js";B.useFramework("ant-design-vue");const I=F({name:"Group",components:{BeastForm:B.beastForm(),PlusSquareOutlined:U,MinusSquareOutlined:E},props:{field:{type:String},rule:{type:Array,required:!0},option:{type:Object},disabled:{type:Boolean},modelValue:{default:null}},emits:["update:modelValue"],setup(a,{emit:i}){const{rule:g,option:c,modelValue:d,field:t}=O(a),s=V([]),l=V([]),n=V([]),_=()=>{d.value&&(t.value?d.value.forEach(e=>{let u={};u[t.value]=e,l.value.push(u)}):l.value=d.value),l.value&&l.value.length&&l.value.forEach(()=>{m(!0)})},m=e=>{let u=y(g.value),k=null;c.value&&(k=y(c.value)),s.value.push({rule:u,option:k}),e||l.value.push({})},f=e=>{s.value.splice(e,1),l.value.splice(e,1),n.value.splice(e,1)},o=()=>{let e=[];return t.value?l.value.forEach(u=>{e.push(u[t.value])}):e=l.value,e};return S(l,()=>{i("update:modelValue",o())},{deep:!0}),_(),{fapis:n,value:l,groupRule:s,onAdd:m,onDel:f}}}),M={key:0,style:{"text-align":"right"}};function N(a,i,g,c,d,t){const s=r("plus-square-outlined"),l=r("beast-form"),n=r("a-col"),_=r("minus-square-outlined"),m=r("a-row");return p(),b(q,null,[a.disabled?C("v-if",!0):(p(),b("div",M,[v(s,{onClick:i[0]||(i[0]=()=>a.onAdd())})])),(p(!0),b(q,null,A(a.groupRule,(f,o)=>(p(),w(m,null,{default:h(()=>[v(n,{flex:"auto"},{default:h(()=>[v(l,{api:a.fapis[o],"onUpdate:api":e=>a.fapis[o]=e,modelValue:a.value[o],"onUpdate:modelValue":e=>a.value[o]=e,rule:f.rule,option:f.option,disabled:a.disabled},null,8,["api","onUpdate:api","modelValue","onUpdate:modelValue","rule","option","disabled"])]),_:2},1024),a.disabled?C("v-if",!0):(p(),w(n,{key:0},{default:h(()=>[v(_,{onClick:()=>a.onDel(o)},null,8,["onClick"])]),_:2},1024))]),_:2},1024))),256))],64)}const D=$(I,[["render",N],["__file","group.vue"]]);export{D as default};
