import{M as resolveComponent,b as reactive,r as ref,ad as resolveDirective,Z as withDirectives,j as h,z as unref,m as inject,H as provide,S as toRefs,g as defineComponent,o as onMounted,E as nextTick,n as onBeforeUnmount,I as onUnmounted,C as watch,D as getCurrentInstance}from"./framework-23cc0af1.js";class config{constructor(e){this.baseConfig={form:"",formPropsModel:"",formItem:"",formItemPropName:"",formItemPropRules:"",formItemPropLabel:"",formItemSlotTitle:"",formEventValidate:"",formEventClearValidate:""},this.model={default:["modelValue"]},this.defaultValue={},this.modelEvent={},this.disabled={default:"disabled"},this.setKeyValue=(t,s)=>{if(["baseConfig","model","defaultValue","modelEvent","disabled"].includes(t))for(let l in s)this[t][l]=s[l]},this.switchFramework=t=>{var s;const l=this.vm.appContext.config.globalProperties.$beastForm;!((s=l.frameworks[t])===null||s===void 0)&&s.baseConfig&&this.setKeyValue("baseConfig",l.frameworks[t].baseConfig)},this.vm=e;const i=this.vm.appContext.config.globalProperties.$beastForm;i?this.initConfig(i):console.error("error: You need set app.config.globalProperties.$beastForm")}initConfig(e){var i,t,s,l,o,n;if(e.base&&(!((t=(i=e.frameworks)===null||i===void 0?void 0:i[e.base])===null||t===void 0)&&t.baseConfig)&&this.setKeyValue("baseConfig",e.frameworks[e.base].baseConfig),e.frameworks)for(let a in e.frameworks)!((s=e.frameworks[a])===null||s===void 0)&&s.model&&this.setKeyValue("model",e.frameworks[a].model),!((l=e.frameworks[a])===null||l===void 0)&&l.defaultValue&&this.setKeyValue("defaultValue",e.frameworks[a].defaultValue),!((o=e.frameworks[a])===null||o===void 0)&&o.modelEvent&&this.setKeyValue("modelEvent",e.frameworks[a].modelEvent),!((n=e.frameworks[a])===null||n===void 0)&&n.disabled&&this.setKeyValue("disabled",e.frameworks[a].disabled)}getModelValueKeys(e){const i=this.model[e];return i?[...i]:this.model.default}getModelValueChangeEvents(e,i){const t=this.modelEvent[e];return i!=null&&i.length?i.map((s,l)=>(t==null?void 0:t[l])||`onUpdate:${s}`):t||[]}getModelValueDefaultNullValues(e,i){const t=this.defaultValue[e];return i!=null&&i.length?i.map((s,l)=>t!=null&&t[l]?t[l]:null):t||[]}getComponentDisabled(e){const i=this.disabled[e];return typeof i=="string"?i:this.disabled.default}}const realizeCloneDeep=(r,e=new WeakMap)=>{if(!isObject(r))return r;if(e.has(r))return e.get(r);if([Date,RegExp,Set,Map,WeakMap,WeakSet,Array].includes(r.constructor))return new r.constructor(r);const t=Object.getOwnPropertyDescriptors(r),s=Object.create(Object.getPrototypeOf(r),t);e.set(r,s);for(let l of Reflect.ownKeys(r))s[l]=isObject(r[l])?realizeCloneDeep(r[l],e):r[l];return s},isObject=r=>typeof r=="object"&&Object.prototype.toString.call(r)==="[object Object]",deepCopy=r=>realizeCloneDeep(r),firstToUpper=r=>r.slice(0,1).toUpperCase()+r.slice(1),firstToLower=r=>r.slice(0,1).toLowerCase()+r.slice(1),onToPropsName=r=>`on${firstToUpper(r)}`,propsToOnName=r=>firstToLower(r.slice(2)),ruleFunTag="~~RFTAG-START~",ruleParse=str=>JSON.parse(str,function(_k,v){return typeof v=="string"&&v.indexOf(ruleFunTag)===0?eval(v.slice(ruleFunTag.length)):v}),ruleStringify=(r,e)=>JSON.stringify(r,function(i,t){return typeof t=="function"?ruleFunTag+t.toString():t},e),globalCache={tagCacheComponents:{},cacheApi:{},config:null,t:null,basePropsOption:null};class LoaderFactory{constructor(e){globalCache.config=new config(e);for(let t in e.appContext.components)globalCache.tagCacheComponents[t]=e.appContext.components[t];globalCache.tagCacheComponents[name]=resolveComponent(name);const i=e==null?void 0:e.proxy;i.$t&&(globalCache.t=i.$t)}static cacheApi(e,i){if(i)globalCache.cacheApi[e]=i;else return globalCache.cacheApi[e]}static removeCacheApi(e){delete globalCache.cacheApi[e]}static switchFramework(e){globalCache.config.switchFramework(e)}static setbasePropsOption(e){e&&Object.keys(e).length?globalCache.basePropsOption=e:globalCache.basePropsOption=null}static loaderComponents(e){if(e)for(let i in e)globalCache.tagCacheComponents[i]=e[i]}static getComponents(e){if(!e)return null;if(globalCache.tagCacheComponents[e])return globalCache.tagCacheComponents[e];if(/[A-Z]/.test(e)){let i="";if(e.replace(/(?=([A-Z]))/g,"-").split("-").forEach(t=>{t&&(i+=firstToLower(t))}),globalCache.tagCacheComponents[i])return globalCache.tagCacheComponents[i]}else{let i="";if(e.split("-").forEach(t=>{t&&(i+=firstToUpper(t))}),globalCache.tagCacheComponents[i])return globalCache.tagCacheComponents[i]}return e}}class RuleFactory{constructor(e,i,t,s,l){this.props=reactive({}),this.formItemProps=reactive({}),this.childrenSlot=reactive({}),this._config={disabled:"",modelKeys:[],modelKeyEvents:[],modelKeyDefaultValues:[]},this.vm=s,this.rule=e,this.modelValue=i,this.api=t,this.isI18n=l,this.display=ref(this.rule.display),this.rule.title&&typeof this.rule.title=="object"&&(this.titleRule=new RuleFactory(this.rule.title,this.modelValue,this.api,this.vm,l)),this.initConfigCache(),this.initProps(),this.initValue(),this.listenEvent(),this.initChildren()}getTag(){var e;return!((e=this.rule)===null||e===void 0)&&e.type?LoaderFactory.getComponents(this.rule.type):null}initConfigCache(){var e,i;let t=this.getTag();if(typeof t=="object"){const s=globalCache.config,l=t.name;this._config.disabled=s.getComponentDisabled(l);let o=[],n=[],a=[],u=t.props?Object.keys(t.props||{}):[];!((e=this.rule.model)===null||e===void 0)&&e.length&&(o=this.rule.model),o.length===0&&(o=s.getModelValueKeys(l)),o=o.filter(f=>u.includes(f)),o.length&&(n=s.getModelValueChangeEvents(l,o),!((i=this.rule.defaultValue)===null||i===void 0)&&i.length&&(a=this.rule.defaultValue),a.length===0&&(a=s.getModelValueDefaultNullValues(l,o)),this.field=this.rule.field,this._config.modelKeys=o,this._config.modelKeyEvents=n,this._config.modelKeyDefaultValues=a)}}initValue(){var e,i,t,s;if(!this.field)return;let l;this._config.modelKeys.length===1?(((e=this.modelValue)===null||e===void 0?void 0:e[this.field])!==void 0?l=this.modelValue[this.field]:((i=this.rule)===null||i===void 0?void 0:i.value)!==void 0?l=this.rule.value:((s=(t=this.rule)===null||t===void 0?void 0:t.props)===null||s===void 0?void 0:s[this._config.modelKeys[0]])!==void 0?l=this.rule.props[this._config.modelKeys[0]]:l=this._config.modelKeyDefaultValues[0],typeof l=="object"&&(l=deepCopy(l)),this.props[this._config.modelKeys[0]]=l):(l={},this._config.modelKeys.forEach((o,n)=>{var a,u,f,d,c;((u=(a=this.modelValue)===null||a===void 0?void 0:a[this.field])===null||u===void 0?void 0:u[o])!==void 0?l[o]=this.modelValue[this.field][o]:((f=this.rule)===null||f===void 0?void 0:f.value)!==void 0?l[o]=this.rule.value[o]:((c=(d=this.rule)===null||d===void 0?void 0:d.props)===null||c===void 0?void 0:c[o])!==void 0?l[o]=this.rule.props[o]:l[o]=this._config.modelKeyDefaultValues[n],typeof l[o]=="object"&&(l[o]=deepCopy(l[o])),this.props[o]=l[o]})),Object.keys(this.modelValue).includes(this.field)||(this.modelValue[this.field]=l)}initProps(){const e=this.getTag();if(typeof e=="object"){let i=[];if(e.props&&(i=Object.keys(e.props)),this.rule.props)for(let t in this.rule.props)this.props[t]=this.rule.props[t];if(this._config.disabled&&i.includes(this._config.disabled)&&(this.props[this._config.disabled]=!1),globalCache.config.baseConfig.formItem&&this.rule.title!==!1){if(this.rule.attrs)for(let t in this.rule.attrs)i.includes(t)||(this.formItemProps[t]=this.rule.attrs[t]);this.rule.style&&(this.formItemProps.style=this.rule.style),this.rule.class&&(this.formItemProps.class=this.rule.class)}else{if(this.rule.attrs)for(let t in this.rule.attrs)i.includes(t)||(this.props[t]=this.rule.attrs[t]);this.rule.style&&(this.props.style=this.rule.style),this.rule.class&&(this.props.class=this.rule.class)}}else{if(this.rule.props)for(let i in this.rule.props)this.props[i]=this.rule.props[i];if(this.rule.attrs)for(let i in this.rule.attrs)this.props[i]=this.rule.attrs[i];this.rule.style&&(this.props.style=this.rule.style),this.rule.class&&(this.props.class=this.rule.class)}}initChildren(){const e=this;if(this.rule.children)if(Array.isArray(this.rule.children))this.rule.children.map(i=>{this.addChildren(i)});else for(const i in this.rule.children){const t=this.rule.children[i];this.childrenSlot[i]=function(){const s=t(...arguments);try{if(Array.isArray(s))return s.map(l=>typeof l=="string"?l:new RuleFactory(l,e.modelValue,e.api,e.vm,e.isI18n).render())}catch{return s}}}}setDisabled(e,i){if(this._config.disabled&&(this.vm.props.disabled===!0?this.setProps(this._config.disabled,!0):this.setProps(this._config.disabled,e===!0?!0:void 0)),i)for(let t in this.childrenSlot){const s=this.childrenSlot[t];Array.isArray(s)&&s.forEach(l=>{typeof l=="object"&&l.setDisabled(e,i)})}}setProps(e,i){this.props[e]=i}setFormItemProps(e,i){this.formItemProps[e]=i}setAttrs(e,i){const t=this.getTag();let s=[];typeof t=="object"&&t.props&&(s=Object.keys(t.props)),s.includes(e)||this.setProps(e,i)}setValue(e,i){if(this.field){if(this._config.modelKeys.length===1)this.props[this._config.modelKeys[0]]=e===void 0?this._config.modelKeyDefaultValues[0]:e;else if(i){const t=this._config.modelKeys.findIndex(s=>s===i);t>-1&&(this.props[i]=e===void 0?this._config.modelKeyDefaultValues[t]:e)}else this._config.modelKeys.forEach((t,s)=>{this.props[t]=(e==null?void 0:e[t])===void 0?this._config.modelKeyDefaultValues[s]:e==null?void 0:e[t]});this.modelValue[this.field]=this.getValue(),this.vm.emit("changeField",this.field,this.getValue(),this.api.publishApi())}}getValue(e){if(this.field){if(this._config.modelKeys.length===1)return this.props[this._config.modelKeys[0]];if(e){if(this._config.modelKeys.findIndex(t=>t===e)>-1)return this.props[e]}else{const i={};return this._config.modelKeys.forEach(t=>{i[t]=this.props[t]}),i}}}addChildren(e,i,t="default"){if(e){if(typeof e=="object"){e.slot&&(t=e.slot),this.childrenSlot[t]||(this.childrenSlot[t]=[]);const s=this.childrenSlot[t];if(Array.isArray(s)){const l=typeof i=="number"?i:s.length,o=new RuleFactory(e,this.modelValue,this.api,this.vm,this.isI18n);s.splice(l,0,o)}}else if(this.childrenSlot.default||(this.childrenSlot.default=[]),Array.isArray(this.childrenSlot.default)){const s=typeof i=="number"?i:this.childrenSlot.default.length;this.childrenSlot.default.splice(s,0,e)}}}delChildren(e,i="default"){const t=this.childrenSlot[i];if(Array.isArray(t)){const s=typeof e=="number"?1:t.length;t.splice(e,s)}}addOn(e,i){const t=this;this.props[onToPropsName(e)]=function(){i?i(...arguments,t.api.publishApi()):t.rule.on[e](...arguments,t.api.publishApi())}}addEmit(e){if(e){const i=this;this.props[onToPropsName(e.event)]=function(){i.vm.emit(e.alias,...arguments,i.api.publishApi())}}}delOnOrEmit(e){const i=onToPropsName(e);typeof this.props[i]=="function"&&delete this.props[i]}listenRuleOnAndEmits(){var e,i;const t=[];if(!((e=this.rule)===null||e===void 0)&&e.emits&&this.rule.emits.forEach(s=>{t.push({source:"emits",event:s.event})}),!((i=this.rule)===null||i===void 0)&&i.on)for(let s in this.rule.on)t.find(l=>l.event===s)||t.push({source:"on",event:s});t.forEach(s=>{if(s.source==="on")this.addOn(s.event);else if(s.source==="emits"){const l=this.rule.emits.find(o=>o.event===s.event);this.addEmit(l)}})}listenModelEvent(){this.field&&this._config.modelKeys.forEach((e,i)=>{const t=this;this.props[t._config.modelKeyEvents[i]]=function(){var s,l,o;t.setValue(arguments[0],e);const n=propsToOnName(t._config.modelKeyEvents[i]);if(!((l=(s=t.rule)===null||s===void 0?void 0:s.on)===null||l===void 0)&&l[n]&&t.rule.on[n](...arguments,t.api.publishApi()),!((o=t.rule)===null||o===void 0)&&o.emits){const a=t.rule.emits.find(u=>u.event===n);a&&t.vm.emit(a.alias,...arguments,t.api.publishApi())}}})}setI18n(e){return this.isI18n&&globalCache.t?globalCache.t(e):e}listenEvent(){this.listenRuleOnAndEmits(),this.listenModelEvent()}renderChildrenSolt(){const e={};for(let i in this.childrenSlot){const t=this.childrenSlot[i];Array.isArray(t)&&t.length?e[i]=()=>t.map(s=>{if(typeof s=="string")return this.setI18n(s);if(typeof s=="object")return s.render()}):typeof t=="function"&&(e[i]=t)}return Object.keys(e).length?e:void 0}renderDirectives(e){if(this.component=e,this.rule.directives){const i=this.rule.directives.map(t=>{if(Array.isArray(t))return typeof t[0]=="string"&&(t[0]=resolveDirective(t[0])),t}).filter(t=>t);return withDirectives(e,i)}else return e}renderType(){return this.renderDirectives(h(this.getTag(),this.props,this.renderChildrenSolt()))}renderFormItem(){const e=this,i=globalCache.config;if(!this.field||this.rule.title===!1||!i.baseConfig.formItem)return;const t={},s={default:()=>[this.renderType()]};return t[i.baseConfig.formItemPropName]=this.rule.field,this.props[this._config.disabled]!==!0&&this.rule.validate&&(this.rule.validate.find(l=>l.required)&&(t.required=!0),t[i.baseConfig.formItemPropRules]=this.rule.validate.map(l=>{const o=Object.assign({},l);return o.message&&(o.message=this.setI18n(o.message)),l.validator&&(o.validator=function(){return l.validator(...arguments,e.api.publishApi())}),o})),typeof this.rule.title=="string"?t[i.baseConfig.formItemPropLabel]=this.setI18n(this.rule.title):this.titleRule&&(s[i.baseConfig.formItemSlotTitle]=()=>this.titleRule.render()),h(LoaderFactory.getComponents(i.baseConfig.formItem),Object.assign(Object.assign({},t),this.formItemProps),s)}render(){if(unref(this.display)!==!1)return this.renderFormItem()||this.renderType()}}var __awaiter=globalThis&&globalThis.__awaiter||function(r,e,i,t){function s(l){return l instanceof i?l:new i(function(o){o(l)})}return new(i||(i=Promise))(function(l,o){function n(f){try{u(t.next(f))}catch(d){o(d)}}function a(f){try{u(t.throw(f))}catch(d){o(d)}}function u(f){f.done?l(f.value):s(f.value).then(n,a)}u((t=t.apply(r,e||[])).next())})};const searchLoop=(r,e,i)=>{r.forEach((t,s)=>{if(typeof t!="string"){if(t.rule.field===e)return i({item:t,index:s,ary:r});for(const l in t.childrenSlot){const o=t.childrenSlot[l];if(Array.isArray(o)&&o.length)return searchLoop(o,e,i)}}})},formValidate=(r,e)=>__awaiter(void 0,void 0,void 0,function*(){if(r)try{yield r[globalCache.config.baseConfig.formEventValidate](e)}catch{return!1}return!0}),clearFormValidate=(r,e)=>{r&&r[globalCache.config.baseConfig.formEventClearValidate](e)};class apiFactory{constructor(e){this.getRule=i=>{let t=null;if(i){const s=i.split("."),l=s.length;for(let o=0;o<l;o++){if(o===0)searchLoop(this.rfs,s[o],({item:n})=>{n&&(t=n)});else if(t)for(const n in t.childrenSlot){const a=t.childrenSlot[n];Array.isArray(a)&&a.length&&searchLoop(a,s[o],({item:u})=>{u?t=u:t=null})}else t=null;if(!t)break}}return t||console.error(`invalid "field=${i}"`),t},this.vm=e}setModelValue(e){this.modelValue=e}setRfs(e){this.rfs=e||[]}setAllVms(e){this.allVms=e}publishApi(){let e=this;return{getApi(i){return globalCache.cacheApi[i]},getComponent(i){const t=e.getRule(i);if(t)return t.component.component},getEl(i){const t=e.getRule(i);if(t)return t.component.el},setValue(i,t,s){const l=e.getRule(i);l&&l.setValue(t,s)},setClass(i,t){this.setProps(i,"class",t)},setStyle(i,t){this.setProps(i,"style",t)},setAttrs(i,t){const s=e.getRule(i);if(s)for(let l in t)s.setAttrs(l,t[l])},getProps(i,t){const s=e.getRule(i);if(s)return s.props[t]},setProps(i,t,s){const l=e.getRule(i);l&&l.setProps(t,s)},setFormItemClass(i,t){const s=e.getRule(i);s&&s.setFormItemProps("class",t)},setFormItemStyle(i,t){const s=e.getRule(i);s&&s.setFormItemProps("style",t)},setDisplay(i,t){const s=e.getRule(i);s&&(s.display.value=t===!0)},setDisabled(i,t){const s=e.getRule(i);s&&s.setDisabled(t)},pushChildren(i,t,s,l){const o=e.getRule(i);o&&o.addChildren(t,s,l)},delChildren(i,t,s){const l=e.getRule(i);l&&l.delChildren(t,s)},isModelKey(i){return Object.keys(e.modelValue).includes(i)},getFormData(i){if(i){if(this.isModelKey(i)){const t=e.getRule(i);if(t)return t.getValue()}}else{const t={};for(let s in e.modelValue)t[s]=this.getFormData(s);return t}},resetFormData(i){if(i){if(this.isModelKey(i)){const t=e.getRule(i);t&&t.setValue(void 0)}}else for(let t in e.modelValue)this.resetFormData(t)},validate(i,t,s){return __awaiter(this,void 0,void 0,function*(){let l=!0,o=null;if(s)(yield formValidate(s.refs[FormFactory.formRefsName],t))||(l=!1);else if(e.allVms){let n=0,a=e.allVms.length;for(n;n<a;n++)(yield formValidate(e.allVms[n].refs[FormFactory.formRefsName],t))||(l=!1)}l&&(t?Array.isArray(t)?(o={},t.forEach(n=>{o[n]=this.getFormData(n)})):o=this.getFormData(t):o=this.getFormData()),i(l,o)})},clearValidate(i,t){t?clearFormValidate(t.refs[FormFactory.formRefsName],i):e.allVms&&e.allVms.forEach(s=>{clearFormValidate(s.refs[FormFactory.formRefsName],i)})},addOn(i,t,s){const l=e.getRule(i);l&&l.addOn(t,s)},addEmit(i,t){const s=e.getRule(i);s&&s.addEmit(t)},delOnOrEmit(i,t){const s=e.getRule(i);s&&s.delOnOrEmit(t)},$t(i){return globalCache.t?globalCache.t(i):i}}}}class FormFactory{constructor(e,i){this.rules=[],this.baseVm=null,this.allVms=[],globalCache!=null&&globalCache.config||new LoaderFactory(e),i&&globalCache.config.switchFramework(i),this.vm=e,this.baseVm=inject("baseVm",null),this.baseVm===null?(this.baseVm=e,provide("baseVm",e),provide("allVms",this.allVms)):this.allVms=inject("allVms"),this.api=new apiFactory(e),this.api.setAllVms(this.allVms),this.initOption(),this.initModelValue(),this.initRule()}initModelValue(){const{modelValue:e}=toRefs(this.vm.props);this.modelValue=reactive(Object.assign({},e.value)),this.api.setModelValue(this.modelValue)}initRule(){const{rule:e}=toRefs(this.vm.props);this.rules=e.value.filter(i=>!!i).map(i=>new RuleFactory(i,this.modelValue,this.api,this.vm,this.option.isI18n)),this.api.setRfs(this.rules)}initDisabled(){const{disabled:e}=toRefs(this.vm.props);this.disabled=e.value,this.rules.forEach(i=>{i.setDisabled(this.disabled,!0)})}initOption(){var e,i,t;const{option:s}=toRefs(this.vm.props),l=(e=this.baseVm.props)===null||e===void 0?void 0:e.option,o=Object.assign(Object.assign(Object.assign({},(i=globalCache==null?void 0:globalCache.basePropsOption)===null||i===void 0?void 0:i.form),l==null?void 0:l.form),(t=s.value)===null||t===void 0?void 0:t.form);this.option=Object.assign(Object.assign(Object.assign(Object.assign({},globalCache.basePropsOption),l),s.value),{form:o})}updateModelValue(e){if(e)for(let i in e)this.modelValue[i]!==e[i]&&this.api.publishApi().setValue(i,e[i])}cacheApi(e){LoaderFactory.cacheApi(e,this.api.publishApi())}delCacheApi(e){LoaderFactory.removeCacheApi(e)}addVm(){this.allVms&&this.allVms.findIndex(i=>i.uid===this.vm.uid)===-1&&this.allVms.push(this.vm)}delVm(){if(this.allVms){let e=this.allVms.findIndex(i=>i.uid===this.vm.uid);e>-1&&this.allVms.splice(e,1)}}renderRule(){return this.rules.map(e=>e.render())}renderForm(){var e,i;const{config:t}=globalCache,s={};let l=LoaderFactory.getComponents(t.baseConfig.form);if(t.baseConfig.form&&l){s.ref=FormFactory.formRefsName;const o=Object.keys(l.props);if(t.baseConfig.formPropsModel&&o.includes(t.baseConfig.formPropsModel)&&(s[t.baseConfig.formPropsModel]=this.modelValue),!((e=this.option)===null||e===void 0)&&e.form)for(let n in this.option.form)o.includes(n)&&(s[n]=this.option.form[n])}else if(l="div",!((i=this.option)===null||i===void 0)&&i.form)for(let o in this.option.form)s[o]=this.option.form[o];return[h(l,s,{default:()=>this.renderRule()})]}render(){return this.option.isForm===!1?this.renderRule():this.renderForm()}}FormFactory.formRefsName="form";const baseEmits=["changeField","update:modelValue","update:api","mounted","unmounted"];function createFactory(r){return defineComponent({name:r.name,directives:r.directives,props:{api:{type:Object},name:{type:String},rule:{type:Array,required:!0},modelValue:{default:null},option:{type:Object},disabled:{type:Boolean}},emits:[...baseEmits,...r.emits],setup(i,{emit:t}){const s=getCurrentInstance(),{modelValue:l,rule:o,option:n,disabled:a,name:u}=toRefs(i),f=new FormFactory(s,r.framework);return onMounted(()=>{f.addVm(),nextTick(()=>{t("mounted",f.api.publishApi()),u.value&&f.cacheApi(u.value)})}),onBeforeUnmount(()=>{f.delVm(),u.value&&f.delCacheApi(u.value),r.directives={},r.emits=[]}),onUnmounted(()=>{t("unmounted")}),nextTick(()=>{t("update:api",f.api.publishApi()),t("update:modelValue",f.modelValue)}),watch(n,()=>{f.initOption(),s.proxy.$forceUpdate()},{deep:!0}),watch(a,()=>{f.initDisabled()},{deep:!0}),watch(f.modelValue,()=>{t("update:modelValue",f.modelValue)},{deep:!0}),watch(o,()=>{f.initModelValue(),f.initRule(),s.ctx.$forceUpdate()},{deep:!0}),watch(l,()=>{nextTick(()=>{f.updateModelValue(l.value)})},{deep:!0}),{fApi:f.api.publishApi(),render(){return f.render()}}},render(){return this.render()}})}const name="BeastForm",_config={name,framework:"",directives:{},emits:[]},vbf={_config,install(r){const e=this.BeastForm();return r.component(e.name,e),r},beastForm(){return createFactory(this._config)},getApi(r){return LoaderFactory.cacheApi(r)},components(r){LoaderFactory.loaderComponents(r)},directive(r,e){this._config.directives[r]=e},emits(r){Array.isArray(r)?this._config.emits=r:this._config.emits=[r]},ruleParse(r){return ruleParse(r)},ruleStringify(r,e){return ruleStringify(r,e)},setBasePropsOption(r){LoaderFactory.setbasePropsOption(r)},useFramework(r){this._config.framework=r}};export{deepCopy as d,vbf as v};
